Objective | Constraints | Target Files & Changes | Test/Validation cases | Steps (1..N) | Rollback | Review Hotspots | Status
--- | --- | --- | --- | --- | --- | --- | ---
FastAPI용 Alembic 환경을 초기화하고 Django DB와 공존 가능한 베이스라인 리비전을 마련. | - Strict TDD (테스트 먼저).<br>- Django 마이그레이션 변경 금지.<br>- Alembic은 SQLAlchemy 모델(`api.models`)만 참조.<br>- 로컬 PostgreSQL 컨테이너 사용, destructive 쿼리 금지. | - 새 테스트: `api/tests/test_alembic_setup.py` (Config/metadata 검증).<br>- 새 파일: `alembic.ini`, `alembic/env.py`, `alembic/script.py.mako`, `alembic/versions/0001_baseline.py`.<br>- 보조 문서: `api/README.md` Phase 체크박스 업데이트. | - pytest가 Alembic 설정을 로드하고 `target_metadata`에 `rag_topic` 포함 확인.<br>- Alembic Config가 SQLAlchemy 엔진 URL을 Django settings와 동일하게 노출.<br>- `alembic downgrade base` dry-run? (테스트에서 command API 호출로 script dir 접근 확인). | 1. 테스트 작성: Alembic 설정 존재/metadata 테이블 포함을 검증 → 실패 예상.<br>2. Alembic 구성 파일과 env 설정 구현, 베이스라인 리비전 작성.<br>3. pytest 재실행, 필요 시 README 등 문서 갱신. | 새로 생성한 Alembic 파일 삭제 + `api/tests/test_alembic_setup.py` 제거로 복구. | - env.py에서 settings import 순환/경로 문제.<br>- autogenerate 설정 시 Django 관리 테이블 처리 제외 필요.<br>- 테스트가 실 DB 접속을 요구하므로 연결 정보 확인. | [ ] 1. 테스트 추가.<br>[ ] 2. 구현.<br>[ ] 3. 검증 및 문서화.
