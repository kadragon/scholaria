Goal | Scope | Related Files/Flows | Hypotheses | Evidence | Assumptions/Open Qs | Sub-agent Findings | Risks | Next
--- | --- | --- | --- | --- | --- | --- | --- | ---
FastAPI용 Alembic 마이그레이션 환경을 구축해 SQLAlchemy 모델과 기존 PostgreSQL 스키마를 동기화할 수 있게 하기. | Phase 1 잔여 작업: Alembic init, 설정, 첫 revision 생성(자동 vs 빈 스텁). Django 마이그레이션 수정은 범위 밖. | `pyproject.toml`(alembic dep), `api/models/*.py`, `api/config.py`, `api/models/base.py`, `docker-compose.yml`, `rag/migrations/*.py`. | 1) Alembic 설정은 SQLAlchemy `Base.metadata`를 필요로 한다. 2) Django와 동일한 DB를 사용하므로 autogenerate 시 기존 테이블과 충돌 주의. 3) FastAPI 전용 마이그레이션 디렉터리를 만들어 하이브리드 운영 가능. | - `pyproject.toml`에 `alembic>=1.13.0` 포함됨.<br>- `api/models/base.py`가 `DeclarativeBase`와 `engine` 제공.<br>- 현재 `alembic/` 디렉터리 없음 (`ls` 결과).<br>- Docker Compose `postgres` 서비스 포트 5432로 기동 확인. | - Alembic.ini 위치? repo 루트에 생성 가정.<br>- Autogenerate 시 Django 테이블 네이밍을 인식해야 함 → metadata에 모든 모델 등록 필요.<br>- Django migrations는 계속 원본으로 유지, 충돌 없이 공존할 수 있을지 검증 필요. | 없음. | - Autogenerate가 기존 스키마와 diff를 많이 만들어 혼란 야기.<br>- 잘못 구성된 env.py가 Django 연결 설정을 망가뜨릴 가능성.<br>- 팀이 두 개의 migration 체계를 혼용하면 유지보수 복잡도 증가. | 1) Alembic init 구조 설계 (env.py → settings, metadata import).<br>2) Autogenerate 전략/규칙 정의 및 첫 revision 작성 계획 수립.<br>3) 테스트 전략(TDD) 수립: CLI 호출 실패 → config 보정.
