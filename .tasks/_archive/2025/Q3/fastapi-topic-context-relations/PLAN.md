Objective | Constraints | Target Files & Changes | Test/Validation cases | Steps (1..N) | Rollback | Review Hotspots | Status
--- | --- | --- | --- | --- | --- | --- | ---
Expose Django Topic↔Context relationships through FastAPI Phase 1 read endpoints while keeping responses parity with DRF serializers. | - Strict TDD.<br>- No schema migrations yet (read-only focus).<br>- Keep Postgres compatibility + pytest fixtures.<br>- Avoid breaking existing contexts/topics endpoints. | - `api/models/topic.py`: add association table + `contexts` relationship.<br>- `api/models/context.py`: add `topics` relationship.<br>- `api/schemas/topic.py`: include nested contexts (`list[ContextOut]`).<br>- `api/routers/topics.py`: apply `selectinload` & ensure detail query handles contexts.<br>- `api/tests/test_topics_poc.py`: add failing tests for nested contexts.<br>- Optionally tweak `api/tests/test_contexts.py` if topics relationship requires override. | - New pytest verifying `/api/topics` includes related contexts (list & detail).<br>- Existing tests remain green.<br>- Manual call (optional) to confirm JSON shape. | 1. Extend tests to assert nested contexts in topic list/detail (expect fail).<br>2. Update SQLAlchemy models to define association + relationships.<br>3. Adjust schemas + routers to surface contexts and validate via pytest once PostgreSQL is reachable. | Revert modified files (git checkout) to previous state; association table addition is code-only (no DB change). | - DetachedInstance risk when session closes before serialization.<br>- Ensure `ContextOut` handles nested `items` default immutability.<br>- Watch for circular imports between models. | [x] 1. Add failing tests for topic-context nesting (pytest currently blocked by missing local Postgres).<br>[x] 2. Implement SQLAlchemy relationships & schema changes (models, schemas, routers updated).<br>[x] 3. Ensure router eager loading + test validation once PostgreSQL accessible. (pytest ✅)
